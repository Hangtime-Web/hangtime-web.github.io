<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>hangtime | Signup</title>
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.5.2/animate.min.css">
  <script src="https://www.gstatic.com/firebasejs/4.10.0/firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase-app.js"></script>
  <!-- <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase-auth.js"></script> -->
  <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase-database.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyAl-oHMwxLGd3Y_JJP_0yw5vtXa0qfGrM8",
      authDomain: "hangtime-344ce.firebaseapp.com",
      databaseURL: "https://hangtime-344ce.firebaseio.com",
      projectId: "hangtime-344ce",
      storageBucket: "hangtime-344ce.appspot.com",
      messagingSenderId: "896133939170",
    };
    firebase.initializeApp(config);
  </script>
<script>
//Build the request URL.  The base URL and next 4 items are typically always the same for Spark web apps
var requestUrl = 'https://api.ciscospark.com/v1/authorize?' + //Spark OAuth2 base URL
 'response_type=code&' + // Requesting the OAuth2 'Authentication Code' flow
 'scope='+ encodeURIComponent('spark:rooms_read','spark-admin:people_read','spark-admin:people_read') + '&' + // Requested permission, i.e. Spark room info
 // The following items are provided by the developer in the source code/config or generated dynamically at run time
 'state=' + encodeURIComponent(randomString(63)) + '&' +    // Random string for OAuth2 nonce replay protection
 'client_id=' + encodeURIComponent(appClientId) + '&' + // The custom app Client ID
 'redirect_uri=' + encodeURIComponent(appRedirectUri); // The custom app's Redirect URI
window.location = requestUrl; // Redirect the browser to the OAuth2 kickoff URL
var params = parseQueryStr(window.location.search.substring(1)); // Parse the query string params into a dictionary
if (params['code']) { // If the query param 'code' exists, then...
 document.getElementById('code').value = params['code']; // Display the auth code
 document.getElementById('tokenButton').removeAttribute('hidden'); // Reveal the 'Request Access Token' button
}
xhttp = new XMLHttpRequest(); // Create an AJAX HTTP request object
xhttp.onreadystatechange = function() {  // Define a handler, which fires when the request completes
 if (xhttp.readyState == 4) { // If the request state = 4 (completed)...
     if (xhttp.status == 200) { // And the status = 200 (OK), then...
         var authInfo = JSON.parse(xhttp.responseText); // Parse the JSON response into an object
         console.log(authInfo).value;
     } else alert('Error requesting access token: ' + xhttp.statusText)
 }
}
xhttp.open('POST', 'https://api.ciscospark.com/v1/access_token', true); // Initialize the HTTP request object for POST to the access token URL
// Build the HTML form request body
var body = 'grant_type=authorization_code&'+  // This is an OAuth2 Authorization Code request
 'redirect_uri='+encodeURIComponent(appRedirectUri)+'&'+ // Same custom app Redirect URI
 'code='+encodeURIComponent(document.getElementById('code').value)+'&'+ // User auth code retrieved previously
 'client_id='+encodeURIComponent(appClientId)+'&'+ // The custom app Client ID
 'client_secret='+encodeURIComponent(appClientSecret); // The custom app Client Secret
xhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'); // Sending the content as URL-encoded form data
xhttp.send(body); // Execute the AJAX HTTP request

</script>
  <!-- Compiled and minified JavaScript -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
  <link rel="stylesheet" href="../css/style.css">
  <script src="../js/app.js"></script>
  <script src= "../js/init.js"></script>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>
<body>
  <nav class="transparent">
    <div class="nav-wrapper">
      <a href="index.html" class="brand-logo center black-text"><span class="theme">hang|</span>time</div></a>
    </div>
  </nav>
  <br><br><br>
  <div class="row">
    <form class="col s12">
      <div class="row">
        <div class="input-field col s12">
          <input id="username" type="text" class="validate">
          <label for="password" class="theme"> Name </label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12">
          <input id="email" type="text" class="validate">
          <label for="password" class="theme">Email</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12">
          <input id="password" type="password" class="validate">
          <label for="password">Create Password</label>
        </div>
      </div>
      <div class="row center-align">
        <div class="col push-s3"><a class="button is-rounded is-large red lighten-1 white-text is-pulled-right waves-effect waves-light animated infinite bounce" href="map.html" onclick="createAccount()"> &nbsp Sign Up &nbsp</a></div>
      </div>
    </form>
  </div>


</body>
</html>
